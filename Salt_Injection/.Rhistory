library(devtools)
install.packages("devtolls")
install.packages("devtools")
library(devtolls)
library(devtools)
install_github('StreamThermal','tsangyp')
cluster)
install.packages(cluster)
install.package(cluster)
install.packages(cluster)
install.packages("cluster")
install.packages("DREAM")
install.packages('rwrfhydro')
install.packages('rwrfhydro')
install.packages('smwrGraphs')
q()
install.packages("smwrGraphs")
install.packages(c("BH", "chron", "colorspace", "dataRetrieval", "DEoptim", "digest", "git2r", "goftest", "Hmisc", "hms", "openssl", "R.utils", "R6", "Rcpp", "scales", "XML", "xml2", "zoo"))
day=1
read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv.Rain',day,sep=''))
read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',day,'.csv'sep=''))
read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',day,'.csv',sep=''))
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',day,'.csv',sep=''))
View(input)
?read.csv
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c(X,Y,LAT,LON,RAIN))
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
?for
end
for (day in 1:2){
input[day]<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
}
str(day)
day
str(input)
?insert
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
}
View(input)
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
for (day in 2:3){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[[ColNamePrecip]]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
}
?append
for (day in 2:3){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[[ColNamePrecip]]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[[ColNamePrecip]]<-tmp$PRECIP
}
View(tmp)
for (day in 2:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[[ColNamePrecip]]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[[ColNamePrecip]]<-tmp$PRECIP
}
View(input)
?median
str(input)
input["Median_Precip"]<-NA
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
}
for (day in 2:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
}
View(input)
input["Median_Precip"]<-NA
input[1,5:136]
median(iinput[1,5:136])
median(input[1,5:136])
median(input[2,5:136])
median(input[[1,5:136]])
input[[1,5:136]]
input[1,5:136]
input[1,5:136]
str(input)
which(input[,5:136])<=0
which(input[,5:136]<=0)
input[which(input[,5:136]<=0)]<-NA
View(input)
for (day in 2:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[ColNamePrecip][which(input[ColNamePrecip]<=0)]<-NA
}
for (day in 2:2){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[ColNamePrecip][which(input[ColNamePrecip]<=0)]<-NA
}
ColNamePrecip<-paste('PRECIP',day,sep = '')
for (day in 2:2){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
}
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
}
for (day in 2:2){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
}
[which(input[ColNamePrecip]<=0)]
which(input[ColNamePrecip]<=0)
input[ColNamePrecip][which(input[ColNamePrecip]<=0)]
input[which(input[ColNamePrecip]<=0)]
which(input[ColNamePrecip]<=0)
input[ColNamePrecip][1]
input[ColNamePrecip][[1]]
input[[ColNamePrecip]][[1]]
input[[ColNamePrecip]][[which(input[ColNamePrecip]<=0)]]
input[[ColNamePrecip]][1]
input[[ColNamePrecip]][1:2]
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]
for (day in 2:2){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
input["Median_Precip"]<-NA
input[[1,]][2:4]
input[1,][2:4]
input[[1,][2:4]]
input[1,][2:4]
input[1,]
input[1]
input[1,]
as.numeric(input[1,])
as.numeric(input[1,5:136])
for (day in 2:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
View(input)
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
}
for (day in 2:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
input["Median_Precip"]<-NA
median(as.numeric(input[1,5:136]))
median(as.numeric(input[1,5:136]),na.rm = T)
length(input)
length(input$Median_Precip)
len<-length(input$Median_Precip)
for (i in 1:len){
median(as.numeric(input[i,5:136]),na.rm = T)
}
View(input)
View(input)
?write.csv
View(input)
View(input)
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
input$PRECIP1[which(input[input$PRECIP1]<=0)]<-NA
}
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
input[PRECIP1][which(input[input$PRECIP1]<=0)]<-NA
}
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
input['PRECIP1'][which(input[input$PRECIP1]<=0)]<-NA
}
View(input)
str(input)
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
input['PRECIP1'][which(input['PRECIP1']<=0)]<-NA
}
View(input)
which(input['PRECIP1']<=0)
input['PRECIP1'][which(input['PRECIP1']<=0)]
View(input)
input[['PRECIP1']][which(input['PRECIP1']<=0)]<-NA
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
input[['PRECIP1']][which(input['PRECIP1']<=0)]<-NA
}
for (day in 1:132){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
input["Median_Precip"]<-NA
len<-length(input$Median_Precip)
for (i in 1:len){
median(as.numeric(input[i,5:136]),na.rm = T)
}
output<-input[,c(1:4,137)]
View(output)
?median
for (i in 1:len){
median(as.numeric(input[i,5:136]),na.rm = Ture)
}
for (i in 1:len){
input["Median_Precip"]<-median(as.numeric(input[i,5:136]),na.rm = T)
}
output<-input[,c(1:4,137)]
median(as.numeric(input[20679,5:136]),na.rm = T)
input["Median_Precip"]
input[["Median_Precip"]][24379]
median(as.numeric(input[24379,5:136]),na.rm = T)
median(as.numeric(input[20673,5:136]),na.rm = T)
input[["Median_Precip"]][20673]
for (i in 1:len){
input[["Median_Precip"]][i]<-median(as.numeric(input[i,5:136]),na.rm = T)
}
output<-input[,c(1:4,137)]
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
re_NA<-input[['PRECIP1']][1]
input[['PRECIP1']][which(input['PRECIP1']<=0)]<-NA    #be aware of [[]] and []
}
output$Median_Precip[which(is.na(output$Median_Precip))]<-re_NA
?write.table
write.table(ouput,'.Trade_DJF_DailyRainfall_Medium.txt',sep = ',',col.names = F, row.names = F)
write.table(output,'.Trade_DJF_DailyRainfall_Medium.txt',sep = ',',col.names = F, row.names = F)
psd
pwd
pws
psw
write.table(output,'C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/
Precip_csv/Trade_DJF_DailyRainfall_Medium.txt',sep = ',',col.names = F, row.names = F)
write.table(output,'C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Trade_DJF_DailyRainfall_Medium.txt',sep = ',',col.names = F, row.names = F)
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/JJA/Trade_JJA_day',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
re_NA<-input[['PRECIP1']][1]
input[['PRECIP1']][which(input['PRECIP1']<=0)]<-NA    #be aware of [[]] and []
}
for (day in 1:1){
input<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/JJA/Trade_JJA_day',
day,'.txt',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP1'))
re_NA<-input[['PRECIP1']][1]
input[['PRECIP1']][which(input['PRECIP1']<=0)]<-NA    #be aware of [[]] and []
}
file_total<-419
View(input)
for (day in 2:file_total){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.csv',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
for (day in 2:file_total){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Rain',
day,'.txt',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
for (day in 2:file_total){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Trade_JJA_day',
day,'.txt',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
for (day in 2:file_total){
ColNamePrecip<-paste('PRECIP',day,sep = '')
input[ColNamePrecip]<-NA
tmp<-read.csv(paste('C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/JJA/Trade_JJA_day',
day,'.txt',sep=''),header = F,col.names = c('X','Y','LAT','LON','PRECIP'))
input[ColNamePrecip]<-tmp$PRECIP
input[[ColNamePrecip]][which(input[ColNamePrecip]<=0)]<-NA
}
input["Median_Precip"]<-NA
len<-length(input$Median_Precip)
for (i in 1:len){
input[["Median_Precip"]][i]<-median(as.numeric(input[i,5:file_total+4]),na.rm = T)
}
output<-input[,c(1:4,file_total+5)]
output$Median_Precip[which(is.na(output$Median_Precip))]<-re_NA
View(input)
View(output)
write.table(output,'C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Chen/MS Thesis/Precip_csv/Trade_JJA_DailyRainfall_Medium.txt',sep = ',',col.names = F, row.names = F)
View(output)
View(output)
library(geoR)
summary(s100)
par(mfrow=c(2,2))
points(s100)
points(s100, xlab = "CoordX", ylab="CoordY")
plot(s100)
plot(s100)
par(mfrow=c(2,2))
points(s100, xlab = "CoordX", ylab="CoordY")
cloud1 <- variog(s100, option = "cloud", max.dist = 1)
cloud2 <- variog(s100, option = "cloud", estimator.type = "modulus",
+ max.dist = 1)
cloud2 <- variog(s100, option = "cloud", estimator.type = "modulus", max.dist = 1)
bin1 <- variog(s100, uvec = seq(0, 1, l = 11))
bin2 <- variog(s100, uvec = seq(0, 1, l = 11), estimator.type = "modulus")
bin1
plot(bin1)
plot(cloud1)
kc4 <- krige.conv(s100, locations = loci, krige = krige.control(obj.m = wls))
?krige.conv
cite.geoR
cite.geoR()
citation
citation()
cite.geoR()
# All defaults
include_graphics("C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Courses_UHM/GG 656 Groundwater Modeling/Assignments/Homework_2/Assignment_2/Case1_Calibration.png")
install.packages("jpg")
library(jpg)
?sample
sample(letters, 100, replace = T)
sample(letters, 100, replace = F)
sample(letters, 100)
sample(letters, 26)
sample(letters, 30)
?rnorm
r<dist>()
dist()
?dist
r<dist>(binomial)
?rnorm
?rbinom
rm(list = ls(all = TRUE))
ls(all = TRUE)
setwd("C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/R_Script/R_workplace/Salt_Injection")
Date<-"20171229"         # YYYYMMDD
InjectionTime<-"11:05"   # Salt Injection time
LogInterval<-5           # YSI logging interval (s)
Weather<-"light rain with sometimes sun"
discharge_FlowMeter_cms<-0.0314
station<-"LYON"
Sensor<-"KUBO"
StandardCurveTime<-"10:30"
Salt_mg<-c(0,120,240,0)             # Salt amount (mg) for upstream, jar1, jar2, downstream
StreamWater_L<-c(1,0.6,0.6,NA)      # Streamwater (L) for the jars, and upstream != 0, downstream = NA for caluclation
Specific_Conductance_us.cm<-c(112.3,518.,921,112.7)  # Sp. Conductance (us/cm)
Temperature_C<-c(20.4,21.1,20.9,20.4)   # Temperautre (degree C)
Concentration_mg.L<-Salt_mg/StreamWater_L   # Concentration (mg/L)
StandardCurve<-data.frame(Salt_mg=Salt_mg, StreamWater_L=StreamWater_L,
Concentration_mg.L=Concentration_mg.L,
Specific_Conductance_us.cm=Specific_Conductance_us.cm,
Temperature_C=Temperature_C)
fit<-lm(Concentration_mg.L~Specific_Conductance_us.cm, StandardCurve)
png(paste("./result/SC",Date,".png",sep = ""),
width=1000, height=800, units="px",pointsize=26,bg="white")
plot(StandardCurve$Specific_Conductance_us.cm, StandardCurve$Concentration_mg.L,
main = paste("Standard Curve for Salt Injection at ", InjectionTime, " on ", Date, sep = ""),
xlab = expression(paste("Sp. Cond (",mu, "s/cm)",sep = "")),
ylab = "Concentration (mg/L)")
abline(fit$coefficients, lty=6, col="red")
cf <- round(coef(fit), 2)
text(700,50, labels = paste("Concentration =",cf[1], ifelse(sign(cf[2])==1, " + ", " - "),
abs(cf[2]), " Sp.Cond ", sep = " "))
dev.off()
ysi<-read.csv(paste("./data/Salt_Injection_",Sensor,"_",Date,".csv",sep = ""))
ysi$CFK<-(ysi$Specific.Conductance..uS.cm.-ysi$Specific.Conductance..uS.cm.[1])*fit$coefficients[2]
discharge_SaltInjection_cms<-1000/(sum(ysi$CFK)*LogInterval)
End_Time<-substr(as.character(ysi$Timestamp[nrow(ysi)]),12,16)
output<-data.frame(Date=as.Date(Date,"%Y%m%d"), Station=station,
Start_Time=InjectionTime, End_Time=End_Time,
FlowMeter_Time=InjectionTime,
FlowMeter_Discharge_cms=discharge_FlowMeter_cms,
SaltInjection_Discharge_cms=discharge_SaltInjection_cms,
Weather=Weather)
data<-read.table("./result/Salt_Injection_Discharge.txt", header = T, sep = "")
data<-read.table("./result/Salt_Injection_Discharge.txt", header = T, sep = "")
data[,c(1:5,8)]<-lapply(data[,c(1:5,8)], as.character)
output[,c(1:5,8)]<-lapply(output[,c(1:5,8)], as.character)
if(nrow(merge(output,data))==0){
data[nrow(data)+1,]<-output[1,]
}
data<-data[order(data$Date),]   # Sort data
View(data)
rm(list = ls(all = TRUE))
ls(all = TRUE)
setwd("C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/R_Script/R_workplace/Salt_Injection")
Date<-"20171229"         # YYYYMMDD
InjectionTime<-"11:05"   # Salt Injection time
LogInterval<-5           # YSI logging interval (s)
Weather<-"light_rain_with_sometimes_sun"
discharge_FlowMeter_cms<-0.0314
station<-"LYON_Downstream"
StandardCurveTime<-"10:30"
Salt_mg<-c(0,120,240,0)             # Salt amount (mg) for upstream, jar1, jar2, downstream
StreamWater_L<-c(1,0.6,0.6,NA)      # Streamwater (L) for the jars, and upstream != 0, downstream = NA for caluclation
Specific_Conductance_us.cm<-c(112.3,518.,921,112.7)  # Sp. Conductance (us/cm)
Temperature_C<-c(20.4,21.1,20.9,20.4)   # Temperautre (degree C)
Concentration_mg.L<-Salt_mg/StreamWater_L   # Concentration (mg/L)
StandardCurve<-data.frame(Salt_mg=Salt_mg, StreamWater_L=StreamWater_L,
Concentration_mg.L=Concentration_mg.L,
Specific_Conductance_us.cm=Specific_Conductance_us.cm,
Temperature_C=Temperature_C)
fit<-lm(Concentration_mg.L~Specific_Conductance_us.cm, StandardCurve)
png(paste("./result/SC",Date,".png",sep = ""),
width=1000, height=800, units="px",pointsize=26,bg="white")
plot(StandardCurve$Specific_Conductance_us.cm, StandardCurve$Concentration_mg.L,
main = paste("Standard Curve for Salt Injection at ", InjectionTime, " on ", Date, sep = ""),
xlab = expression(paste("Sp. Cond (",mu, "s/cm)",sep = "")),
ylab = "Concentration (mg/L)")
abline(fit$coefficients, lty=6, col="red")
cf <- round(coef(fit), 2)
text(700,50, labels = paste("Concentration =",cf[1], ifelse(sign(cf[2])==1, " + ", " - "),
abs(cf[2]), " Sp.Cond ", sep = " "))
dev.off()
ysi<-read.csv(paste("./data/Salt_Injection_",Sensor,"_",Date,".csv",sep = ""))
Sensor<-"KUBO"
ysi<-read.csv(paste("./data/Salt_Injection_",Sensor,"_",Date,".csv",sep = ""))
ysi$CFK<-(ysi$Specific.Conductance..uS.cm.-ysi$Specific.Conductance..uS.cm.[1])*fit$coefficients[2]
discharge_SaltInjection_cms<-1000/(sum(ysi$CFK)*LogInterval)
End_Time<-substr(as.character(ysi$Timestamp[nrow(ysi)]),12,16)
output<-data.frame(Date=as.Date(Date,"%Y%m%d"), Station=station,
Start_Time=InjectionTime, End_Time=End_Time,
FlowMeter_Time=InjectionTime,
FlowMeter_Discharge_cms=discharge_FlowMeter_cms,
SaltInjection_Discharge_cms=discharge_SaltInjection_cms,
Weather=Weather)
data<-read.table("./result/Salt_Injection_Discharge.txt", header = T, sep = "")
data[,c(1:5,8)]<-lapply(data[,c(1:5,8)], as.character)
output[,c(1:5,8)]<-lapply(output[,c(1:5,8)], as.character)
if(nrow(merge(output,data))==0){
data[nrow(data)+1,]<-output[1,]
}
data<-data[order(data$Date),]   # Sort data
write.table(data,"./result/Salt_Injection_Discharge.txt", quote = F,
col.names = T, row.names = F)
knitr::opts_chunk$set(echo = TRUE)
paste("./CRIS","_",Date,".csv",sep = "")
setwd("C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Tsang/Project_SmartAlaWai")
Date<-"20180329"         # YYYYMMDD
Sensor<-"KUBO"
paste("./CRIS","_",Date,".csv",sep = "")
rm(list = ls(all = TRUE))
ls(all = TRUE)
setwd("C:/Users/Yu-Fen Huang/GoogleDrive_yfhuang/Lab_Tsang/Project_SmartAlaWai")
